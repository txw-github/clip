
# 🎬 智能剧情点剪辑系统使用指南

## 📋 系统概述

本系统专为您的需求设计，完美解决15个核心问题：

### ✨ 核心功能
1. **智能剧情点识别**: 自动识别关键冲突、人物转折、线索揭露、情感爆发、重要对话
2. **非连续时间段合并**: 支持在原视频中不连续的时间段，剪辑后逻辑连贯
3. **旁观者叙述字幕**: 自动生成详细清晰的第三人称解说
4. **完整故事线说明**: 每个片段都有剧情意义分析
5. **智能错别字修正**: 自动修正"防衛"→"防卫"等错误
6. **跨集连贯性**: 保证故事发展的连贯性

## 📁 文件准备

### 1. 字幕文件准备
将字幕文件放入 `srt/` 目录，支持格式：
- `.srt` 文件
- `.txt` 文件

文件名要包含集数信息：
```
srt/
├── S01E01.srt          # 第1集
├── S01E02.srt          # 第2集  
├── 第03集.txt          # 第3集（中文命名）
├── EP04.srt            # 第4集
└── ...
```

### 2. 视频文件准备
将视频文件放入 `videos/` 目录，支持格式：
- `.mp4`, `.mkv`, `.avi`, `.mov`, `.wmv`, `.flv`, `.ts`

```
videos/
├── S01E01.mp4          # 对应第1集
├── S01E02.mkv          # 对应第2集
├── 第03集.avi          # 对应第3集
└── ...
```

## 🚀 使用方法

### 方法1: 一键启动（推荐）
点击页面上的 **"Run"** 按钮，系统会自动：
1. 检查目录结构
2. 分析字幕文件
3. 识别剧情点
4. 创建视频片段
5. 生成字幕和报告

### 方法2: 命令行启动
```bash
python start_plot_clipper.py
```

## 📊 输出结果

### 1. 视频片段 (`clips/` 目录)
每个剧情点生成一个视频片段：
```
clips/
├── E01-法庭激辩：关键冲突白热化.mp4
├── E01-真相揭露：关键证据曝光.mp4
├── E01-命运转折：关键决定时刻.mp4
└── ...
```

### 2. 旁观者叙述字幕 (`clips/` 目录)
每个视频对应的字幕文件：
```
clips/
├── E01-法庭激辩：关键冲突白热化_旁白.srt
├── E01-真相揭露：关键证据曝光_旁白.srt
└── ...
```

字幕内容示例：
```srt
1
00:00:00,000 --> 00:00:03,000
在这个关键时刻，双方展开了激烈的争论

2
00:00:03,500 --> 00:00:06,500
冲突逐渐升级，观点针锋相对

3
00:00:06,500 --> 00:00:09,500
争议达到白热化，真相即将揭晓

4
00:00:10,000 --> 00:00:12,000
这场冲突将对后续剧情产生重要影响
```

### 3. 详细分析报告 (`clips/` 目录)
每个片段的详细分析：
```
clips/
├── E01-法庭激辩：关键冲突白热化_分析报告.txt
├── E01-真相揭露：关键证据曝光_分析报告.txt
└── ...
```

### 4. 集数总结 (`reports/` 目录)
每集的整体分析总结：
```
reports/
├── S01E01_剧情总结.txt
├── S01E02_剧情总结.txt
└── 系统最终报告.txt
```

## 🎭 剧情点类型说明

### 1. 关键冲突 (目标时长: 3分钟)
- **识别标准**: 冲突、争执、对抗、质疑、激烈辩论
- **适用场景**: 法庭辩论、观点冲突、立场对立
- **旁白风格**: "在这个关键时刻，双方展开了激烈的争论..."

### 2. 人物转折 (目标时长: 2.5分钟)  
- **识别标准**: 决定、改变、选择、转变、觉悟
- **适用场景**: 角色成长、命运转折、重要决策
- **旁白风格**: "角色面临重要的人生选择..."

### 3. 线索揭露 (目标时长: 2.7分钟)
- **识别标准**: 发现、揭露、真相、证据、线索
- **适用场景**: 案件破解、秘密曝光、真相大白
- **旁白风格**: "重要线索即将浮出水面..."

### 4. 情感爆发 (目标时长: 2.3分钟)
- **识别标准**: 哭、痛苦、激动、崩溃、感动
- **适用场景**: 情感高潮、感人时刻、心理爆发
- **旁白风格**: "情感积累到了临界点..."

### 5. 重要对话 (目标时长: 2.8分钟)
- **识别标准**: 告诉、承认、坦白、解释、澄清
- **适用场景**: 关键信息交流、重要表态
- **旁白风格**: "关键对话即将展开..."

## 🔧 系统特色

### 智能片段合并
- 系统可以将原视频中不连续的时间段智能合并
- 例如: `00:15:30-00:17:45` + `00:22:10-00:24:20` 合并为一个连贯片段
- 保证剧情逻辑连贯，观看体验流畅

### 旁观者叙述生成
- 自动生成第三人称解说
- 避免剧透，保持悬念
- 语言生动有趣，吸引观众

### 错别字智能修正
自动修正常见错误：
- 防衛 → 防卫
- 正當 → 正当  
- 証據 → 证据
- 檢察官 → 检察官
- 聽證會 → 听证会

### 完整故事线说明
每个片段都包含：
- 剧情意义分析
- 在整体故事中的作用
- 与其他片段的关联
- 对后续发展的影响

## 📈 质量保证

### 时长控制
- 每个剧情点2-3分钟，适合短视频传播
- 根据剧情点类型动态调整目标时长
- 自动寻找自然的开始和结束点

### 内容连贯
- 智能识别场景转换点
- 保证对话完整性，不截断句子
- 维护剧情逻辑连贯性

### 跨集连贯性
- 分析每集结尾与下集开头的衔接
- 保证故事线的连续发展
- 适合连续观看和系列制作

## 🎯 适用场景

- **短视频平台内容制作**: 抖音、快手、B站等
- **电视剧精彩片段剪辑**: 突出精华内容
- **剧情分析和解说**: 专业影视分析
- **影视内容二次创作**: 重新演绎经典剧情

## ⚠️ 注意事项

1. **文件命名**: 确保字幕和视频文件名包含集数信息
2. **文件格式**: 支持多种格式，建议使用UTF-8编码
3. **存储空间**: 确保有足够空间存放输出文件
4. **版权合规**: 请确保使用符合版权法规

## 🔄 工作流程

```
字幕文件 → 解析和错误修正 → 剧情点识别 → 片段优化 → 视频剪辑 → 字幕生成 → 报告输出
```

每个环节都有详细的日志输出，方便跟踪进度和调试问题。

---

🎬 现在就开始使用智能剧情点剪辑系统，让您的电视剧内容制作更加高效专业！
