
# 📺 电视剧核心剧情剪辑系统使用指南

## 🎯 系统功能

本系统专门为您的需求设计，能够：

- **单集核心聚焦**：每集围绕1个核心剧情点，时长控制在2-3分钟
- **片段选择标准**：优先选取包含完整对话/场景的时间轴片段，确保剧情连贯
- **主线剧情优先**：突出四二八案、628旧案、听证会等关键剧情线索
- **强戏剧张力**：证词反转、法律争议、情感爆发点自动识别
- **跨集连贯性**：每集结尾明确与下一集的衔接点
- **自动错别字修正**：修正"防衛"→"防卫"等常见错误

## 📁 文件准备

### 1. 字幕文件
将字幕文件放在项目根目录，文件名要包含集数信息：

```
S01E01.txt          # 第1集字幕
S01E02.txt          # 第2集字幕
第3集.srt           # 第3集字幕（中文命名）
EP04.txt            # 第4集字幕
...
```

### 2. 视频文件
在项目根目录创建`videos/`文件夹，放入对应的视频文件：

```
videos/
├── S01E01.mp4      # 第1集视频
├── S01E02.mkv      # 第2集视频（支持多种格式）
├── 第3集.avi       # 第3集视频（中文命名）
├── EP04.wmv        # 第4集视频
...
```

## 🚀 使用方法

### 一键启动（推荐）
点击页面上的 **"Run"** 按钮，或执行：
```bash
python start_core_clipping.py
```

### 高级用户
直接运行核心剪辑器：
```bash
python episode_core_clipper.py
```

## 📊 输出结果

### 1. 核心短视频文件
保存在`core_clips/`目录：

```
core_clips/
├── E01_李慕枫申诉启动_四二八案重审在即.mp4
├── E02_628旧案线索关联_真相逐步揭露.mp4
├── E03_听证会激烈辩论_正当防卫争议焦点.mp4
├── E04_张园霸凌证据曝光_校园真相震撼人心.mp4
...
```

### 2. 详细集数报告
每集都有专门的报告文件，保存在`episode_reports/`目录：

```
episode_reports/
├── E01_剧情报告.txt
├── E02_剧情报告.txt
├── E03_剧情报告.txt
...
```

**报告内容包含：**
- 核心剧情线分析
- 精确时间标注的关键台词
- 内容亮点详细说明
- 故事价值评估
- 与下一集的衔接说明

### 3. 整体连贯性分析
`series_coherence_report.txt` 包含：
- 主线剧情分布统计
- 跨集连贯性分析
- 整体制作质量评估

## 🎭 核心剧情线识别

系统能自动识别以下主线剧情：

1. **四二八案**：李慕枫申诉、正当防卫争议、段洪山证词
2. **628旧案**：旧案线索、新旧案关联、真相揭露
3. **听证会**：法庭辩论、证词质证、法律争议
4. **张园霸凌**：校园霸凌证据、学生证词、真相曝光
5. **段洪山父女**：父女情感线、亲情法理冲突

## 📝 输出格式示例

### 短视频主题格式
```
E07：李慕枫申诉启动，旧案疑点浮现
E08：张园霸凌证据曝光，校园真相震撼人心
E09：听证会激烈辩论，正当防卫争议焦点
```

### 时间片段标注
```
[00:15:30,000 --> 00:15:45,000] 李慕枫：我要为四二八案申诉！
[00:16:10,500 --> 00:16:25,800] 检察官：这个案子的正当防卫认定存在争议。
[00:17:02,200 --> 00:17:18,900] 段洪山：我的证词可能改变一切...
```

### 内容亮点
```
• 首次提及四二八案申诉程序
• 628旧案与新案关联线索披露  
• 正当防卫争议，法理情交织
• 剧情重大反转，认知颠覆时刻
```

### 衔接说明
```
本集申诉程序正式启动，为下一集听证会准备和法庭激辩铺垫
```

## 🔧 技术特性

- **智能边界优化**：自动寻找自然的对话开始和结束点
- **时长精确控制**：严格控制在2-3分钟，避免冗余信息
- **多格式支持**：支持SRT、TXT等字幕格式，MP4、MKV等视频格式
- **错误自动修正**：智能修正繁体字和常见错别字
- **评分系统**：基于剧情重要性、戏剧张力、情感强度的智能评分

## ⚠️ 注意事项

1. **文件命名**：确保字幕和视频文件名包含清晰的集数信息
2. **文件对应**：字幕文件和视频文件要能正确匹配
3. **FFmpeg依赖**：确保系统已安装FFmpeg用于视频处理
4. **存储空间**：确保有足够空间存储输出的短视频文件

## 🎉 预期效果

使用本系统，您将获得：

- **精准定位**：每集最精彩的2-3分钟核心剧情
- **完整故事线**：跨集连贯，逻辑清晰的剧情发展
- **专业质量**：精确时间标注，详细内容分析
- **便于传播**：适合短视频平台的时长和内容密度
- **深度分析**：每个片段的价值和意义都有详细说明

立即点击 **"Run"** 按钮开始体验！
