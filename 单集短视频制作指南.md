
# 📺 电视剧单集短视频制作指南

## 🎯 系统功能

本系统专门为您的需求设计，能够：
- **每集制作一个短视频**：每集围绕1个核心剧情点，时长2-3分钟
- **主线剧情优先**：自动识别四二八案、628旧案、听证会等关键剧情
- **智能片段选择**：基于戏剧张力、情感强度、对话质量自动评分
- **跨集连贯性**：每集结尾都有明确的下集衔接说明
- **自动错别字修正**：修正"防衛"→"防卫"等常见错误

## 📁 文件准备

### 1. 字幕文件
将字幕文件放在项目根目录，命名要包含集数信息：
```
S01E01.txt          # 第1集字幕
S01E02.txt          # 第2集字幕
S01E03.txt          # 第3集字幕
...
```

### 2. 视频文件
在项目根目录创建`videos/`文件夹，放入对应的视频文件：
```
videos/
├── S01E01.mp4      # 第1集视频
├── S01E02.mp4      # 第2集视频
├── S01E03.mp4      # 第3集视频
...
```

## 🚀 使用方法

### 方法1：直接运行启动脚本
```bash
python start_episode_clipping.py
```

### 方法2：单独运行剪辑器
```bash
python episode_clipper.py
```

## 📊 输出结果

### 1. 短视频文件
保存在`episode_clips/`目录：
```
episode_clips/
├── E01_四二八案申诉启动_案件迎来转机.mp4
├── E02_628旧案疑点浮现_真相即将揭露.mp4
├── E03_听证会激烈辩论_正当防卫争议.mp4
...
```

### 2. 说明文件
每个视频都有对应的说明文件：
```
E01_四二八案申诉启动_案件迎来转机_说明.txt
```

内容包括：
- 时间片段（精确到秒）
- 核心价值分析
- 关键台词（带时间码）
- 下集衔接说明

### 3. 总体方案文档
`series_plan.txt`包含：
- 每集详细剪辑方案
- 剧情连贯性分析
- 制作统计信息

## 📋 剪辑规则

### 片段选择标准
1. **主线剧情优先**：四二八案、628旧案、听证会等
2. **戏剧张力强**：反转、揭露、发现、真相等
3. **情感爆发点**：愤怒、痛苦、激动、崩溃等
4. **对话强度高**：感叹号、问号多的台词

### 时长控制
- **目标时长**：2-3分钟（120-180秒）
- **缓冲时间**：前后各加2秒确保完整性
- **自然边界**：寻找自然的开始和结束点

### 连贯性保证
- **衔接分析**：每集结尾分析与下集的联系
- **逻辑一致**：人物关系、案件线索保持一致
- **故事完整**：确保每集都有完整的故事片段

## 🎬 输出示例

### 集数主题示例
- `E07：李慕枫申诉启动，旧案疑点浮现`
- `E08：张园霸凌证据曝光，案件真相大白`
- `E09：听证会激烈辩论，正当防卫争议`

### 关键台词示例
```
[00:15:45,230 --> 00:15:48,660] 我要为四二八案申请重审
[00:16:12,440 --> 00:16:15,320] 这个证据证明当年的判决有误
[00:17:30,120 --> 00:17:33,560] 张园的霸凌行为确实存在
```

### 衔接说明示例
- "本集申诉程序启动，为下一集听证会翻案铺垫"
- "新证据浮现，下一集案件迎来重大转机"
- "张园涉案信息披露，下一集霸凌真相全面揭露"

## ⚠ 注意事项

1. **FFmpeg依赖**：确保系统已安装FFmpeg
2. **文件命名**：字幕和视频文件名要对应
3. **存储空间**：确保有足够空间存储输出视频
4. **编码兼容**：输出为H.264/AAC格式，兼容性良好

## 🔧 故障排除

### 常见问题
1. **找不到视频文件**：检查videos/目录和文件命名
2. **字幕解析失败**：检查字幕文件格式和编码
3. **FFmpeg错误**：更新FFmpeg到最新版本
4. **内存不足**：减少并发处理或释放内存

### 获取帮助
如遇问题，请检查控制台输出的详细错误信息。
